import{_ as D}from"./ValaxyMain.vue_vue_type_style_index_0_lang-fe952921.js";import{_ as F,p as y,c as i,w as o,o as A,a as s,b as l,d as n,r as a,e as C}from"./app-a51598bf.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-9cc900c2.js";import"./YunCard.vue_vue_type_script_setup_true_lang-fac3e250.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-e8684ee8.js";const d="/images/pasted-337.png",_="/images/pasted-338.png",h="/images/pasted-339.png",u="/images/pasted-340.png",m="/images/pasted-341.png",f="/images/pasted-342.png",g="/images/pasted-343.png",b="/images/pasted-344.png",E="/images/pasted-345.png",jo=JSON.parse('{"title":"HipoRank抽取式无监督长文本摘要","description":"","frontmatter":{"layout":"post","title":"HipoRank抽取式无监督长文本摘要","categories":["nlp"],"tags":[],"date":"2022-06-28T11:12:00.000Z"},"headers":[{"level":2,"title":"数据爬虫","slug":"数据爬虫","link":"#数据爬虫","children":[]},{"level":2,"title":"文本内容解析","slug":"文本内容解析","link":"#文本内容解析","children":[]},{"level":2,"title":"模型运行","slug":"模型运行","link":"#模型运行","children":[]},{"level":2,"title":"解析summary","slug":"解析summary","link":"#解析summary","children":[]}],"relativePath":"pages/posts/HipoRank abstract.md","path":"/home/runner/work/1ss4kIT.github.io/1ss4kIT.github.io/pages/posts/HipoRank abstract.md","lastUpdated":1690730773000}'),c=JSON.parse('{"title":"HipoRank抽取式无监督长文本摘要","description":"","frontmatter":{"layout":"post","title":"HipoRank抽取式无监督长文本摘要","categories":["nlp"],"tags":[],"date":"2022-06-28T11:12:00.000Z"},"headers":[{"level":2,"title":"数据爬虫","slug":"数据爬虫","link":"#数据爬虫","children":[]},{"level":2,"title":"文本内容解析","slug":"文本内容解析","link":"#文本内容解析","children":[]},{"level":2,"title":"模型运行","slug":"模型运行","link":"#模型运行","children":[]},{"level":2,"title":"解析summary","slug":"解析summary","link":"#解析summary","children":[]}],"relativePath":"pages/posts/HipoRank abstract.md","path":"/home/runner/work/1ss4kIT.github.io/1ss4kIT.github.io/pages/posts/HipoRank abstract.md","lastUpdated":1690730773000}'),k={name:"pages/posts/HipoRank abstract.md",data(){return{data:c,frontmatter:c.frontmatter,$frontmatter:c.frontmatter}},setup(){y("pageData",c)}},x=s("p",null,"本文使用一个简单的基于图的算法，将文本分为两个层次，分别是section和sentence，以发现句子间的丰富的结构。本方法没有深度学习模型训练的过程，只使用了一种重要性排序的算法来计算。数据集中的train.txt也并没有使用到。",-1),w=s("p",null,[s("img",{src:d,alt:"upload successful"})],-1),B=s("p",null,"上图显示了一个例子，文章由两个段落组成，每个段落有3个句子。实线表示内部连接，是双向的，虚线表示外部连接，是有方向的。V代表节点，表示句子。E表示边，用来衡量句子的相似度。",-1),v=s("p",null,"需要思考的问题 🤔 ❓⌛️",-1),S=s("p",null,"1、本文基于这样的假设：与其他句子相似性更大的句子，更加重要，就被选取为摘要了。但是这个思想本身是正确的吗？",-1),O=s("p",null,"2、section的表示，使用所有句子表示向量的平均，是否合理？",-1),R={id:"数据预处理",tabindex:"-1"},L=s("p",null,"论文使用了两种数据集，分别是：arXiv (没下载) / PubMed (下载使用了，train.txt 4.4G，val.txt 251MB)。但是我需要迁移到我自己的数据集上来使用。",-1),j=s("p",null,"给出的Pubmed的数据组织形式如下：",-1),I=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"article_id"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"abstract_text"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"article_text"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"section_names"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"sections"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"]]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),U=s("p",null,"更具体地说，是如下格式",-1),P=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"article_id"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"XXX"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"article_text"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"第一句话"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"第二句话"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"......"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"abstract_text"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"\\<S>bchdbch.\\</S> "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"\\<S>vbvbsvnjksf.\\</S>"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"  【这个后面被当成人工标记的摘要的结果啦】")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"labels"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," null")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"section_names"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"1. Introduction"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"2. Methods"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"3. Results"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"4. Discussion"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"sections"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"chjdsna"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"cdsnkcd"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"cjsfgeuybc"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"],"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"XXX"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"XXX"),s("span",{style:{color:"#89DDFF"}},"],"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"XXX"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),G=s("p",null,"自己的数据集是纯文本的形式，需要把它处理成上文的格式。",-1),T=s("p",null,"1、编写了article2txt()函数，用于将文本按句子划分，每个句子一行，保存为txt格式。",-1),$=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"内容：")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"	读取文本")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"	判断是否英文，英文才写入")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#82AAFF"}},"使用"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},". "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," 划分为一句一句。")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"	写入txt")])])])],-1),N=s("p",null,"一个bug，如下格式的内容被分开了，需要后续手工调整",-1),X=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"Update "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"Oct"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}}," 30"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#F78C6C"}},"2019"),s("span",{style:{color:"#89DDFF"}},"):"),s("span",{style:{color:"#A6ACCD"}}," Talos "),s("span",{style:{color:"#89DDFF"}},"is"),s("span",{style:{color:"#A6ACCD"}}," disclosing two additional")])])])],-1),H=s("p",null,"2、手工标记段落",-1),M=s("p",null,"每个section的开头是段落标题；",-1),z=s("p",null,"手工调整段落，每个section之间以3个换行符分割。",-1),q=s("p",null,[s("img",{src:_,alt:"upload successful"})],-1),V=s("p",null,"保存在当前的txt文档中",-1),J=s("p",null,"3、txt转为json文件",-1),Z=s("p",null,"定义了txt2json函数，用于将一句一句的txt转为模型可以直接读取的json文件。",-1),K=s("p",null,"随后定义了exclude_n函数，用于将产生的json文件的换行符删掉。",-1),Q=s("p",null,"4、将多个txt文档合并为一个",-1),W=s("p",null,"需要保证每个txt后面都有一个换行符～",-1),Y=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cat "),s("span",{style:{color:"#89DDFF"}},"*."),s("span",{style:{color:"#F07178"}},"txt"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," test"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"txt")])])])],-1),ss={id:"文本读取",tabindex:"-1"},ls=s("p",null,[l("处理读取文档内容的函数位于"),s("code",null,"dataset_iterators/pubmed.py")],-1),os=s("p",null,"2、读取文本内容",-1),es=s("p",null,"在PubmedDataset的__init__函数中，读取txt文档的内容，txt的每一行包含了一篇文章。将每一行都解析成 PubmedDoc 的格式。",-1),ns=s("p",null,"如果有长度限制，使用_filter_doc_len函数进行过滤。会直接把长度不符合的文本给过滤掉，也就是不会对他们进行摘要，而不是进行padding操作。",-1),ts=s("p",null,"3、封装数据",-1),as=s("p",null,[l("生成Document格式的数据。在punned.py中有"),s("code",null,"from hipo_rank import Document, Section"),l("，在hipo_rank文件夹下的 _"),s("em",null,"init"),l("_.py 中找到了如下定义。")],-1),cs=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"@"),s("span",{style:{color:"#82AAFF"}},"dataclass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Section"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# dataclass wrapper for section in a document and associated text (split into sentences)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#82AAFF"}},"id"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# section name")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    sentences"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    meta"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Optional"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Dict"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"None")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"@"),s("span",{style:{color:"#82AAFF"}},"dataclass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Document"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# dataclass wrapper for documents yielded by a dataset iterator")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    sections"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Section"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    reference"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    meta"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Optional"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Dict"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"None")])])])],-1),ps=s("p",null,"exp3_run.py中调用的格式为",-1),rs=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"DataSet "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"dataset"),s("span",{style:{color:"#89DDFF"}},"(**"),s("span",{style:{color:"#82AAFF"}},"dataset_args"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"In "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},"]:"),s("span",{style:{color:"#A6ACCD"}}," dataset_id")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Out"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},"]:"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"pubmed_test"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"In "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"5"),s("span",{style:{color:"#89DDFF"}},"]:"),s("span",{style:{color:"#A6ACCD"}}," dataset")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Out"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"5"),s("span",{style:{color:"#89DDFF"}},"]:"),s("span",{style:{color:"#A6ACCD"}}," hipo_rank"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"dataset_iterators"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"pubmed"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"PubmedDataset")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"In "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"6"),s("span",{style:{color:"#89DDFF"}},"]:"),s("span",{style:{color:"#A6ACCD"}}," dataset_args")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Out"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"6"),s("span",{style:{color:"#89DDFF"}},"]:"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"file_path"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"data/pubmed-release/test4.txt"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Ds={id:"词嵌入",tabindex:"-1"},Fs=s("p",null,[l("有四种模型可选，分别是"),s("code",null,"rand"),l(" 、"),s("code",null,"bert"),l("、"),s("code",null,"w2v"),l("和"),s("code",null,"sent_transformers"),l("。")],-1),ys=s("p",null,"安装：pip install -U sentence-transformers",-1),is=s("p",null,"使用示例如下：",-1),As=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#A6ACCD"}}," sentence_transformers "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#A6ACCD"}}," SentenceTransformer")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"model "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"SentenceTransformer"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"all-MiniLM-L6-v2"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"最开始在本机加载model失败，在服务器运行成功，可能是环境问题导致的。")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sentences "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"This framework generates embeddings for each input sentence"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"Sentences are passed as a list of string."),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"The quick brown fox jumps over the lazy dog."),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"sentence_embeddings "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," model"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"encode"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sentences"),s("span",{style:{color:"#89DDFF"}},")")])])])],-1),Cs=s("p",null,"1、导入数据类型",-1),ds=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#A6ACCD"}}," hipo_rank "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#A6ACCD"}}," Document"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," Embeddings"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," SectionEmbedding"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," SentenceEmbeddings")])])])],-1),_s=s("p",null,"其定义如下",-1),hs=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"@"),s("span",{style:{color:"#82AAFF"}},"dataclass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Document"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# dataclass wrapper for documents yielded by a dataset iterator")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    sections"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Section"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    reference"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    meta"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Optional"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Dict"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"None")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"@"),s("span",{style:{color:"#82AAFF"}},"dataclass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"SentenceEmbeddings"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# dataclass wrapper for section in a document and associated sentence embeddings")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#82AAFF"}},"id"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# section name")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    embeddings"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," ndarray "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# first dim = number of sentences")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    meta"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Optional"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Dict"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"None")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"@"),s("span",{style:{color:"#82AAFF"}},"dataclass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"SectionEmbedding"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# dataclass wrapper for section in a document and associated embedding")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#82AAFF"}},"id"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# section name")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    embedding"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," ndarray")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    meta"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Optional"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Dict"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"None")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"      ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"@"),s("span",{style:{color:"#82AAFF"}},"dataclass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Embeddings"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# dataclass wrapper for section in a document and associated sentence embeddings")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    sentence"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"SentenceEmbeddings"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    section"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"SectionEmbedding"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    meta"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Optional"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Dict"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"None")])])])],-1),us=s("p",null,"2、embedding计算",-1),ms=s("p",null,"sentence是较为常规的计算方式",-1),fs=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"np"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"stack"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"model"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"encode"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sentences"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"show_progress_bar"),s("span",{style:{color:"#89DDFF"}},"=False))")])])])],-1),gs=s("p",null,"section的计算如下：",-1),bs=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"section_embeddings "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#82AAFF"}},"SectionEmbedding"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"se"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"embedding"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"np"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"mean"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"se"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"embeddings"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"axis"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},"))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                              "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," se "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," sentence_embeddings"),s("span",{style:{color:"#89DDFF"}},"]")])])])],-1),Es=s("p",null,"将一个section的所有sentence取平均值，就是一个section的embedding的值。",-1),ks={id:"边的权重及方向计算",tabindex:"-1"},xs=s("p",null,"图的连接形式分为两类：内部连接和外部连接",-1),ws=s("p",null,"内部连接：一个section里面的所有sentence都两两相连。",-1),Bs=s("p",null,"外部连接，只允许让某一个section里的一个top节点 指向另外的section的节点。目的是减少边的数量。",-1),vs=s("p",null,"1、余弦相似度计算",-1),Ss=s("p",null,[l("hipo_rank下的similarities用来计算句子间的相似度，本文使用的是余弦相似度，"),s("code",null,"CosSimilarity"),l("类传入的参数是阈值。")],-1),Os=s("p",null,[l("该类下的"),s("code",null,"get_similarities"),l("计算了sentence和sentence、sentence和section、section和section之间的相似度。")],-1),Rs=s("p",null,"在cos.py文件中设置的边都是undirected的。",-1),Ls=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"directions "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"undirected"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," _ "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," pair_indices"),s("span",{style:{color:"#89DDFF"}},"]")])])])],-1),js=s("p",null,"2、方向计算",-1),Is=s("p",null,"基本思想：最重要的句子都在开头和结尾出现。定义了指标db来衡量这种重要性。",-1),Us=s("p",null,[s("img",{src:h,alt:"upload successful"})],-1),Ps=s("p",null,"directions下的edge.py定义了EdgeBased类。",-1),Gs=s("p",null,"python代码实现如下",-1),Ts=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"_get_direction"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"node1_index"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"int"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"node2_index"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"int"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"num_nodes"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"int"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        dist_i "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"min"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"node1_index"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD"}},"self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"u"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"num_nodes "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#82AAFF"}}," node1_index "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        dist_j "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"min"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"node2_index"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD"}},"self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"u"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"num_nodes "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#82AAFF"}}," node2_index "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#A6ACCD"}}," dist_i "),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," dist_j"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"forward"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"elif"),s("span",{style:{color:"#A6ACCD"}}," dist_i "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#A6ACCD"}}," dist_j"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"backward"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"undirected"),s("span",{style:{color:"#89DDFF"}},'"')])])])],-1),$s=s("p",null,"箭头的方向是从权重大的指向权重较小的。forward代表第一个节点的位置权重比第二个节点大。",-1),Ns=s("p",null,"引入了",-1),Xs=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"@"),s("span",{style:{color:"#82AAFF"}},"dataclass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Similarities"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# dataclass wrapper for similarities in a document")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    sent_to_sent"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"SentenceSimilarities"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    sect_to_sect"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," SectionSimilarities")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    sent_to_sect"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"SentenceSimilarities"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    meta"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Optional"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Dict"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"None")])])])],-1),Hs=s("p",null,"随后在edge中还有定义的update_directions函数，用来更新边的权重信息。",-1),Ms=s("p",null,"order.py的构造和edge.py差不多～但是其位置信息只使用了绝对距离。",-1),zs=s("p",null,"3、score计算",-1),qs=s("p",null,[l("随后在"),s("code",null,"hipo_rank/scorers"),l("目录下进行权重的最终计算")],-1),Vs=s("p",null,[l("从_"),s("em",null,"init"),l("_.py引入如下内容")],-1),Js=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"score "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"float")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"section_idx "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"int")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"local_idx "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"int")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"global_idx "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"int")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Scores "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Tuple"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"score"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"section_idx"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"local_idx"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"global_idx"),s("span",{style:{color:"#89DDFF"}},"]]")])])])],-1),Zs=s("p",null,"定义了MultiplyScorer类",-1),Ks=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"MultiplyScorer"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"__init__"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"    所需参数：")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"    forward_weight: float = 0.,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"    backward_weight: float = 1.,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"    section_weight: float = 1.,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"forward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," forward_weight "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#前向的 一个section之间，句子到句子的权重。这里其实就是参数λ1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"backward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," backward_weight")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  	self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"forward_sect_to_sect_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," forward_weight "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," section_weight "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#section的权重值是两者相乘")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  	self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"backward_sect_to_sect_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," backward_weight "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," section_weight")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"get_scores"),s("span",{style:{color:"#89DDFF"}},"():")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"    用来计算score的得分")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    wI"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"λ1 ∗"),s("span",{style:{color:"#82AAFF"}},"sim"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"vI"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}},"vI"),s("span",{style:{color:"#89DDFF"}},"),"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ifdb"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"vI"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}},"≥"),s("span",{style:{color:"#82AAFF"}},"db"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"vI"),s("span",{style:{color:"#89DDFF"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    或 wI"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}},"λ2∗"),s("span",{style:{color:"#82AAFF"}},"sim"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"vjI"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}},"viI"),s("span",{style:{color:"#89DDFF"}},"),"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"ifdb"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"viI"),s("span",{style:{color:"#89DDFF"}},")<"),s("span",{style:{color:"#82AAFF"}},"db"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"vjI"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"forward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"j"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"backward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor")])])])],-1),Qs=s("p",null,"随后计算每个句子总共的权重，是其内部连接和外部连接的和。",-1),Ws=s("p",null,[l("在add.py中，先计算sent_to_sent的score值，再计算sent_to_sect的值，两者相加，求的和的值存储在"),s("code",null,"scores[sect_index][i]"),l(" 中。")],-1),Ys=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"# add sent_to_sent scores")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," sect_index"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," sent_to_sent "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"enumerate"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"similarities"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sent"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            pids "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," sent_to_sent"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"pair_indices")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            dirs "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," sent_to_sent"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"directions")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            sims "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," sent_to_sent"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"similarities")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            norm_factor "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"len"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#82AAFF"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"])"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"(("),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"j"),s("span",{style:{color:"#89DDFF"}},"),"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"dir"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," sim"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"zip"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"pids"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," dirs"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," sims"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"dir"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"forward"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"forward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sent_weight")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"j"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"backward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sent_weight")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"elif"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"dir"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"backward"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"j"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"forward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sent_weight")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"backward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sent_weight")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"j"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"backward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sent_weight")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"backward_sent_to_sent_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sent_weight")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# add sent_to_sect scores")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," sect_index"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," sent_to_sect "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"enumerate"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"similarities"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sect"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            pids "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," sent_to_sect"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"pair_indices")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            dirs "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," sent_to_sect"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"directions")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            sims "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," sent_to_sect"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"similarities")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            norm_factor "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"len"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"scores"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"(("),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"j"),s("span",{style:{color:"#89DDFF"}},"),"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"dir"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," sim"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"zip"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"pids"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," dirs"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," sims"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"dir"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"forward"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"forward_sent_to_sect_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sect_weight")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"elif"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"dir"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"backward"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"or"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"dir"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"undirected"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                    scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"sect_index"),s("span",{style:{color:"#89DDFF"}},"]["),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"backward_sent_to_sect_weight"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," sim "),s("span",{style:{color:"#89DDFF"}},"/"),s("span",{style:{color:"#A6ACCD"}}," norm_factor "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sent_to_sect_weight")])])])],-1),sl=s("p",null,"随后将结果存储在ranked_scores中，并按照相似度的值进行从高到低排序，代码如下：",-1),ll=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ranked_scores "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"[]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        sect_global_idx "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," sect_idx"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," sect_scores "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"enumerate"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"scores"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," sent_idx"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," sent_score "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"enumerate"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sect_scores"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"                ranked_scores"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"append"),s("span",{style:{color:"#89DDFF"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sent_score"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                     sect_idx"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                     sent_idx"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                     sect_global_idx "),s("span",{style:{color:"#89DDFF"}},"+"),s("span",{style:{color:"#82AAFF"}}," sent_idx")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                     "),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                "),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            sect_global_idx "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"len"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sect_scores"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"        ranked_scores"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"sort"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"key"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#C792EA"}},"lambda"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"x"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#82AAFF"}}," x"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},"],"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"reverse"),s("span",{style:{color:"#89DDFF"}},"=True)")])])])],-1),ol=s("p",null,"文中给出的计算公式如下图，这里只给了add的计算方式，没有给出相乘的要如何计算。",-1),el=s("p",null,[s("img",{src:u,alt:"upload successful"})],-1),nl=s("p",null,[l("multiply的方法与其大致相同，但是计算了乘积，而不是求和。sent_to_sent的值存储在"),s("code",null,"scores[sect_index][i]"),l("中，sect_to_sect的值值存储在"),s("code",null,"sect_scores[i]"),l("中。随后将")],-1),tl=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," i"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," score "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"enumerate"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sect_scores"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"            scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"score"),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}},"s "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," s "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," scores"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"i"),s("span",{style:{color:"#89DDFF"}},"]]")])])])],-1),al=s("p",null,[l("将原本的"),s("code",null,"scores[sect_index][i]"),l("中的每个sentence乘上 其所在的section对应的sect_scores的值。")],-1),cl={id:"生成摘要",tabindex:"-1"},pl=s("p",null,[l("在 "),s("code",null,"hipo_rank/summarizers"),l(" 文件下。")],-1),rl={id:"实验结果",tabindex:"-1"},Dl=s("p",null,"1、ROUGE 安装使用",-1),Fl=s("p",null,"将ROUGE-1.5.5文件夹上传",-1),yl=s("p",null,"由于之前在另一个文件夹下安装过，直接使用会报错",-1),il=s("p",null,[s("code",null,"PermissionError: [Errno 13] Permission denied: 'xxx/acl18/ROUGE-1.5.5/ROUGE-1.5.5.pl'")],-1),Al=s("p",null,[s("code",null,"pyrouge_set_rouge_path ~/mayue/hipo/ROUGE-1.5.5")],-1),Cl=s("p",null,[l("但是使用时还是有报错，"),s("code",null,"PermissionError: [Errno 13] Permission denied: '/home/g3/mayue/hipo/ROUGE-1.5.5/ROUGE-1.5.5.pl'")],-1),dl=s("p",null,"使用PubMed的验证集 来微调超参数，并且进行消融实验。",-1),_l=s("p",null,[s("img",{src:m,alt:"upload successful"})],-1),hl=s("p",null,"作者得出超参数结果：",-1),ul=s("p",null,"λ1 = 0.0, λ2 = 1.0, α = 1.0, with μ1 = 0.5",-1),ml=s("p",null,"α 控制开始位置和结尾的位置 哪个更重要。",-1),fl=s("p",null,"3、运行exp3，生成摘要",-1),gl=s("p",null,"进行测试，生成摘要，并且计算ROUGE值。",-1),bl=s("p",null,"词嵌入部分选取了5个模型来实验，分别如下",-1),El=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"rand_200")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"biomed_w2v")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"pacsum_bert")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"st_bert_base")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"st_roberta_large")])])])],-1),kl=s("p",null,"使用Embedder.get_embeddings(doc)，为每个文档生成一个embed",-1),xl=s("p",null,[s("img",{src:f,alt:"upload successful"})],-1),wl=s("p",null,"根据定义的计算相似性的方式，得到sims",-1),Bl=s("p",null,"sentence-sentence",-1),vl=s("p",null,"section-sentence",-1),Sl=s("p",null,"sect_to_sect",-1),Ol=s("p",null,"使用余弦相似度，并且是不对称的，句子间的不对称。",-1),Rl=s("p",null,[s("img",{src:g,alt:"upload successful"})],-1),Ll=s("p",null,"再根据DIRECTIONS，得到是edge还是order还是undirected",-1),jl=s("p",null,"更新sims的方向",-1),Il=s("p",null,"计算得分，得到摘要，保存。保存的结果如下图所示",-1),Ul=s("p",null,[s("img",{src:b,alt:"upload successful"})],-1),Pl=s("p",null,"每个句子后面跟着的四个数字分别如下：",-1),Gl=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"ranked_scores"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"append"),s("span",{style:{color:"#89DDFF"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sent_score"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#句子的得分")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                     sect_idx"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#所在section的索引")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                     sent_idx"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#所在句子的索引")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                     sect_global_idx "),s("span",{style:{color:"#89DDFF"}},"+"),s("span",{style:{color:"#82AAFF"}}," sent_idx "),s("span",{style:{color:"#676E95","font-style":"italic"}},"#全局索引")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                     "),s("span",{style:{color:"#89DDFF"}},")")])])])],-1),Tl=s("p",null,"4、baseline比较",-1),$l=s("p",null,"评估指标：ROUGE F1 / ROUGE- 1 / ROUGE-2 / ROUGE-L",-1),Nl=s("p",null,"无监督抽取式：SumBasic(2007)、LSA(2004)、LexRank(2004)、PACSUM(2019) (PACSUM，基于图的无监督模型，利用了基于BERT的句子表示。)",-1),Xl=s("p",null,"有监督神经网络抽取式：vanilla encoder-decoder模型(2016)、SummaRuNNer(2017)、GlobalLocalCont(2019)、Sent-CLF(2019)和Sent-PTR(2019)",-1),Hl=s("p",null,"神经网络生成式：Attn-Seq2Seq(2016)、Pntr- Gen-Seq2Seq(2017)、Discourse- aware(2018)",-1),Ml=s("p",null,"其他：first k tokens(no paper)、Oracle(2017)",-1),zl=s("p",null,"5、人工评估",-1),ql=s("p",null,"之前没有工作做个这个方面。",-1),Vl={id:"使用手册",tabindex:"-1"},Jl={id:"数据爬虫",tabindex:"-1"},Zl=s("p",null,"待做",-1),Kl=s("p",null,"既然有那些数据，说明之前肯定有人爬取过了，我没必要再重复造轮子辽~",-1),Ql={id:"文本内容解析",tabindex:"-1"},Wl=s("p",null,"运行parsefile_1.py，将目录下的文本进行解析。",-1),Yl=s("p",null,"运行parsefile_2.py，将文本改为模型可以处理的模式。",-1),so=s("p",null,[s("code",null,"cat *.txt >text4.txt")],-1),lo={id:"模型运行",tabindex:"-1"},oo=s("p",null,[l("对于安全文章来说，一般最开始的位置更加重要，所以a设置为1.2，就使得末尾位置的权重更大了，末尾位置就会变得更加不重要。修改"),s("code",null,"directions/edge.py")],-1),eo=s("p",null,[l("将上文得到的text4.txt 放入服务器中，运行exp3_run.py，得到的结果存储在 "),s("code",null,"results/exp3"),l("中。")],-1),no={id:"解析summary",tabindex:"-1"},to=s("p",null,"虽然上文生成了摘要文档，但是句子是以 score的得分顺序来组织的，并且也不是人直接可读的形式。以如下方式进行排序",-1),ao=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"pubmed_test_hiporank_path "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"/Users/my/Documents/blog/source/_postsresults/exp3/pubmed_test-st_bert_base-cos-edge-add_f=0.0_b=1.0_s=0.5/summaries.json"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"pubmed_test_hiporank_ori "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," json"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"loads"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"Path"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"pubmed_test_hiporank_path"),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"read_text"),s("span",{style:{color:"#89DDFF"}},"())")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"pubmed_test_hiporank_txt "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}},"\\n"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"join"),s("span",{style:{color:"#89DDFF"}},"(["),s("span",{style:{color:"#82AAFF"}},"s"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},"]."),s("span",{style:{color:"#82AAFF"}},"replace"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#A6ACCD"}},"\\n"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},'""'),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#82AAFF"}}," s "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#82AAFF"}}," sorted"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"x"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"summary"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"],"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"key"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#C792EA"}},"lambda"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"x"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#82AAFF"}},"x"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},"])])"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," x "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," pubmed_test_hiporank_ori"),s("span",{style:{color:"#89DDFF"}},"]")])])])],-1),co=s("p",null,"此外，为了增加可读性，需要将文章的标题加上。",-1),po=s("p",null,[l("在init.py的"),s("code",null,"Document"),l("中加入title，加入后其数据格式如下：")],-1),ro=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"@"),s("span",{style:{color:"#82AAFF"}},"dataclass")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Document"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#676E95","font-style":"italic"}},"# dataclass wrapper for documents yielded by a dataset iterator")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    sections"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Section"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    reference"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," List"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    title"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"str")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    meta"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#A6ACCD"}}," Optional"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"Dict"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"None")])])])],-1),Do=s("p",null,"在pubmed.py中加入title",-1),Fo=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"title "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}},"doc"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"article_id"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," doc "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," docs"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"	"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#82AAFF"}},"Document"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"sections"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"s"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"reference"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"r"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"title"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"t"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#A6ACCD"}}," s"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"r"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"t "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"zip"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sections"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," references"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," title"),s("span",{style:{color:"#89DDFF"}},")]")])])])],-1),yo=s("p",null,"最后在运行exp3_run.py的部分，将title写入",-1),io=s("div",{class:"language-python"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"results"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"append"),s("span",{style:{color:"#89DDFF"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"	"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"num_sects"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#82AAFF"}}," len"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"doc"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sections"),s("span",{style:{color:"#89DDFF"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"  "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"num_sents"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#82AAFF"}}," sum"),s("span",{style:{color:"#89DDFF"}},"(["),s("span",{style:{color:"#82AAFF"}},"len"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"s"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sentences"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#82AAFF"}}," s "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#82AAFF"}}," doc"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"sections"),s("span",{style:{color:"#89DDFF"}},"]),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"	"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"summary"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#82AAFF"}}," summary"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"	"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"title"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#82AAFF"}}," doc"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"title")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"	"),s("span",{style:{color:"#89DDFF"}},"})")])])])],-1),Ao=s("p",null,"最终每篇文章得到的结果如下图所示",-1),Co=s("p",null,[s("img",{src:E,alt:"upload successful"})],-1),_o=s("p",null,"可以看出仍然有较多的IOC指标或URL参考链接，后续需要将其删除。",-1),ho={id:"todo-⌛️",tabindex:"-1"},uo=s("p",null,"1、测试时，分别使用add和multiply的方法来进行尝试，查看结果",-1),mo=s("p",null,"2、不以一个完整的句子来判断相似度，而是用含有标点符号的片段。比如遇到了一个逗号，就将其进行切割。",-1),fo=s("p",null,"3、仍然手工标记section！！！",-1),go=s("p",null,"4、先提取IOC，将提取出的IOC从文本中删除掉，再进行摘要",-1),bo=s("p",null,"5、将英文转为中文",-1);function Eo(t,ko,xo,wo,p,Bo){const e=C,r=D;return A(),i(r,{frontmatter:p.frontmatter,data:p.data},{"main-content-md":o(()=>[s("p",null,[l("项目地址："),n(e,{href:"https://github.com/mirandrom/HipoRank",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("https://github.com/mirandrom/HipoRank")]),_:1})]),x,w,B,v,S,O,s("h1",R,[l("数据预处理 "),n(e,{class:"header-anchor",href:"#数据预处理","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),L,j,I,U,P,G,T,$,N,X,H,M,z,q,V,J,Z,K,Q,W,Y,s("h1",ss,[l("文本读取 "),n(e,{class:"header-anchor",href:"#文本读取","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ls,s("p",null,[l("1、在pubmed.py中，使用dataclass来装饰PubmedDoc，作用是无需定义__init__函数，定义参数属性时更加方便且易读。具体可参考"),n(e,{href:"https://zhuanlan.zhihu.com/p/59657729",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("这篇")]),_:1}),l("。")]),os,es,ns,ts,as,cs,ps,rs,s("h1",Ds,[l("词嵌入 "),n(e,{class:"header-anchor",href:"#词嵌入","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Fs,s("p",null,[l("以"),n(e,{href:"https://github.com/UKPLab/sentence-transformers",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("sentence-transformers")]),_:1}),l(" 为例来说明调用过程，(因为其他的几个模型都有点太大了)")]),ys,is,As,Cs,ds,_s,hs,us,ms,fs,gs,bs,Es,s("h1",ks,[l("边的权重及方向计算 "),n(e,{class:"header-anchor",href:"#边的权重及方向计算","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),xs,ws,Bs,vs,Ss,Os,Rs,Ls,js,Is,Us,Ps,Gs,Ts,$s,Ns,Xs,Hs,Ms,s("p",null,[n(e,{href:"http://undirected.py",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("undirected.py")]),_:1}),l("，函数内部进行循环，标注是undirected的～")]),zs,qs,Vs,Js,Zs,Ks,Qs,Ws,Ys,sl,ll,ol,el,nl,tl,al,s("h1",cl,[l("生成摘要 "),n(e,{class:"header-anchor",href:"#生成摘要","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),pl,s("p",null,[n(e,{href:"http://default.py",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("default.py")]),_:1}),l(" 中的DefaultSummarizer 按照rank后的顺序，来组织挑选出的句子。")]),s("h1",rl,[l("实验结果 "),n(e,{class:"header-anchor",href:"#实验结果","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Dl,Fl,yl,il,s("p",null,[l("参考 "),n(e,{href:"https://blog.csdn.net/qingjuanzhao/article/details/106076323%EF%BC%8C",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("https://blog.csdn.net/qingjuanzhao/article/details/106076323，")]),_:1}),l(" 进行如下设置")]),Al,Cl,s("p",null,[l("再参考 "),n(e,{href:"https://github.com/lancopku/Global-Encoding/issues/13%EF%BC%8C%E8%BF%90%E8%A1%8C%60chmod",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("https://github.com/lancopku/Global-Encoding/issues/13，运行`chmod")]),_:1}),l(" 777 ROUGE-1.5.5.pl`，即可解决该问题。")]),s("p",null,[l("2、"),n(e,{href:"http://exp1.py",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("exp1.py")]),_:1})]),dl,_l,hl,ul,ml,fl,gl,bl,El,kl,xl,wl,Bl,vl,Sl,Ol,Rl,Ll,jl,Il,Ul,Pl,Gl,Tl,$l,Nl,Xl,Hl,Ml,zl,ql,s("h1",Vl,[l("使用手册 "),n(e,{class:"header-anchor",href:"#使用手册","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h2",Jl,[l("数据爬虫 "),n(e,{class:"header-anchor",href:"#数据爬虫","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Zl,Kl,s("h2",Ql,[l("文本内容解析 "),n(e,{class:"header-anchor",href:"#文本内容解析","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Wl,Yl,so,s("h2",lo,[l("模型运行 "),n(e,{class:"header-anchor",href:"#模型运行","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),oo,eo,s("h2",no,[l("解析summary "),n(e,{class:"header-anchor",href:"#解析summary","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),to,ao,co,po,ro,Do,Fo,yo,io,Ao,Co,_o,s("h1",ho,[l("TODO ⌛️ "),n(e,{class:"header-anchor",href:"#todo-⌛️","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),uo,mo,fo,go,bo]),"main-header":o(()=>[a(t.$slots,"main-header")]),"main-header-after":o(()=>[a(t.$slots,"main-header-after")]),"main-nav":o(()=>[a(t.$slots,"main-nav")]),"main-content":o(()=>[a(t.$slots,"main-content")]),"main-content-after":o(()=>[a(t.$slots,"main-content-after")]),"main-nav-before":o(()=>[a(t.$slots,"main-nav-before")]),"main-nav-after":o(()=>[a(t.$slots,"main-nav-after")]),comment:o(()=>[a(t.$slots,"comment")]),footer:o(()=>[a(t.$slots,"footer")]),aside:o(()=>[a(t.$slots,"aside")]),"aside-custom":o(()=>[a(t.$slots,"aside-custom")]),default:o(()=>[a(t.$slots,"default")]),_:3},8,["frontmatter","data"])}const Io=F(k,[["render",Eo]]);export{jo as __pageData,Io as default};
